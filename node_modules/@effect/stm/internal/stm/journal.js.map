{"version":3,"file":"journal.js","names":["Entry","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","JournalAnalysisInvalid","exports","JournalAnalysisReadWrite","JournalAnalysisReadOnly","commitJournal","journal","entry","commit","analyzeJournal","val","isInvalid","isChanged","prepareResetJournal","saved","Map","copy","clear","collectTodos","allTodos","todo","ref","todos","execTodos","todosSorted","Array","from","entries","sort","x","y","_","addTodo","txnId","todoEffect","added","isValid","valid"],"sources":["../../../../src/internal/stm/journal.ts"],"sourcesContent":[null],"mappings":"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"}